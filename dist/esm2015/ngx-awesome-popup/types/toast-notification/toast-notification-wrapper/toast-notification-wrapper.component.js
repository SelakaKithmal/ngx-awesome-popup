import { ChangeDetectorRef, Component } from '@angular/core';
import { ToastNotificationClass } from '../core/model';
import { Observable } from 'rxjs';
import { delay } from 'rxjs/operators';
import { fadeInOut } from '../../../core/animations';
export class ToastNotificationWrapperComponent {
    constructor(toastNotificationBelonging, cd) {
        this.toastNotificationBelonging = toastNotificationBelonging;
        this.cd = cd;
        this.fadeInOutAnimation = 'open';
    }
    ngAfterViewInit() {
        this.setResponse(false);
        this.cd.detectChanges();
        this.autoClose();
    }
    setResponse(_IsSuccess, _ClickedButtonID) {
        const response = new ToastNotificationClass.ToastNotificationDefaultResponse();
        if (_ClickedButtonID) {
            response.ClickedButtonID = _ClickedButtonID;
        }
        response.setSuccess(_IsSuccess);
        response.setBelonging(this.toastNotificationBelonging);
        this.toastNotificationBelonging.EventsController.setDefaultResponse(response);
    }
    onOverlayClicked(evt) {
        // console.log('onOverlayClicked');
    }
    onToastClicked(evt) {
        // console.log('onOverlayClicked');
    }
    onCustomButton(_Button) {
        this.toastNotificationBelonging.EventsController.onButtonClick(_Button);
        this.setResponse(true, _Button.ID);
        this.toastNotificationBelonging.EventsController.close();
    }
    onButtonClick(_Type) {
        this.setResponse(_Type === 'confirm');
        this.toastNotificationBelonging.EventsController.close();
    }
    autoClose() {
        if (this.toastNotificationBelonging.ToastCoreConfig.AutoCloseDelay
            && !(this.toastNotificationBelonging.Buttons.length
                || this.toastNotificationBelonging.ToastCoreConfig.DeclineLabel
                || this.toastNotificationBelonging.ToastCoreConfig.ConfirmLabel)) {
            setTimeout(() => {
                this.closeParent$('close-slow').subscribe(resp => {
                    this.toastNotificationBelonging.EventsController.close();
                });
            }, this.toastNotificationBelonging.ToastCoreConfig.AutoCloseDelay);
        }
    }
    closeParent$(_ClosingAnimation) {
        this.fadeInOutAnimation = _ClosingAnimation;
        const timer = _ClosingAnimation === 'close-slow' ? 1400 : 150;
        return new Observable((observer) => {
            observer.next('');
            observer.complete();
        }).pipe(delay(timer));
    }
    close() {
        this.toastNotificationBelonging.EventsController.close();
    }
}
ToastNotificationWrapperComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-toast-notification-wrapper',
                template: "<div class=\"overlay-toast\" (dblclick)=\"onOverlayClicked($event)\" [@fadeInOut]=\"fadeInOutAnimation\">\n\t\n\t<div\n\t\t\tclass=\"evolve-toast\" (click)=\"onToastClicked($event)\" [ngClass]=\"{\n          'standard-dialog': 0 === toastNotificationBelonging.ToastCoreConfig.LayoutType,\n          'success-dialog': 1 === toastNotificationBelonging.ToastCoreConfig.LayoutType,\n          'info-dialog': 2 === toastNotificationBelonging.ToastCoreConfig.LayoutType,\n          'warning-dialog': 3 === toastNotificationBelonging.ToastCoreConfig.LayoutType,\n          'danger-dialog': 4 === toastNotificationBelonging.ToastCoreConfig.LayoutType\n        }\"\n\t\t\t[ngStyle]=\"{'width': toastNotificationBelonging.ToastCoreConfig.Width, 'height': toastNotificationBelonging.ToastCoreConfig.Height}\"\n\t>\n\t\t<div class=\"toast-title-content\" *ngIf=\"toastNotificationBelonging.Message.Title\">\n\t\t\t\n\t\t\t<div class=\"dont-break-out\">\n\t\t\t\t<div class=\"text-wrapper dont-break-out\">\n\t\t\t\t\t<div class=\"toast-title-text\">{{toastNotificationBelonging.Message.Title}}</div>\n\t\t\t\t\t<div class=\"close-ico\" (click)=\"close()\"\n\t\t\t\t\t\t\t*ngIf=\"\n\t\t\t\t\t     !toastNotificationBelonging.Buttons.length\n\t\t\t\t\t     && !toastNotificationBelonging.ToastCoreConfig.DeclineLabel\n\t\t\t\t\t     && !toastNotificationBelonging.ToastCoreConfig.ConfirmLabel\n\t\t\t\t\t     \"\n\t\t\t\t\t></div>\n\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\n\t\t</div>\n\t\t\n\t\t<div class=\"content-holder\" *ngIf=\"toastNotificationBelonging.Message.Description\">\n\t\t\t\n\t\t\t<div class=\"text-wrapper-section toast-inner-content\" [ngStyle]=\"{'width': toastNotificationBelonging.ToastCoreConfig.Width, 'height': toastNotificationBelonging.ToastCoreConfig.Height}\">\n\t\t\t\t\n\t\t\t\t<!--<div class=\"dont-break-out\" [ngClass]=\"{'text-wrapper-section-with-icon': showIcon, 'text-wrapper-section': !showIcon}\">-->\n\t\t\t\t<div class=\"dont-break-out\">\n\t\t\t\t\t<div class=\"text-wrapper dont-break-out\"><p>{{toastNotificationBelonging.Message.Description}}</p></div>\n\t\t\t\t</div>\n\t\t\t\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"close-ico\" (click)=\"close()\"\n\t\t\t     *ngIf=\"\n\t\t\t\t\t     !toastNotificationBelonging.Buttons.length\n\t\t\t\t\t     && !toastNotificationBelonging.ToastCoreConfig.DeclineLabel\n\t\t\t\t\t     && !toastNotificationBelonging.ToastCoreConfig.ConfirmLabel\n\t\t\t\t\t     && !toastNotificationBelonging.Message.Title\n\t\t\t\t\t     \"\n\t\t\t></div>\n\t\t\t\n\t\t</div>\n\t\t\n\t\t<div class=\"button-holder\">\n\t\t\t<div class=\"button-section\" *ngIf=\"toastNotificationBelonging.Buttons.length\" [ngStyle]=\"{ 'text-align': toastNotificationBelonging.ToastCoreConfig.ButtonPosition }\">\n\t\t\t\t\n\t\t\t\t<button\n\t\t\t\t\t\tclass=\"ed-btn ed-btn-sm\" *ngFor=\"let button of toastNotificationBelonging.Buttons\" (click)=\"onCustomButton(button)\"\n\t\t\t\t\t\t[ngClass]=\"{\n\t\t\t                   '': (button.LayoutType ? (button.LayoutType === 0)  : false),\n                              'ed-btn-success': (button.LayoutType ? (button.LayoutType === 1) : false),\n                              'ed-btn-info': (button.LayoutType ? (button.LayoutType === 2) : false),\n                              'ed-btn-warning': (button.LayoutType ? (button.LayoutType === 3)  : false),\n                              'ed-btn-danger': (button.LayoutType ? (button.LayoutType === 4)  : false),\n                              'ed-btn-dark': (button.LayoutType ? (button.LayoutType === 5)  : false),\n                              'ed-btn-light': (button.LayoutType ? (button.LayoutType === 6)  : false),\n                               'ed-btn-primary': (button.LayoutType ? (button.LayoutType === 7) : false),\n                              'ed-btn-secondary': (button.LayoutType ? (button.LayoutType === 8)  : false),\n                              'ed-btn-link': (button.LayoutType ? (button.LayoutType === 9)  : false)\n                            }\"\n\t\t\t\t>{{button.Label}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div\n\t\t\t\t\tclass=\"button-section\" [ngStyle]=\"{ 'text-align': toastNotificationBelonging.ToastCoreConfig.ButtonPosition }\"\n\t\t\t\t\t*ngIf=\"\n\t\t\t     !toastNotificationBelonging.Buttons.length\n\t\t\t     && (\n\t\t\t      toastNotificationBelonging.ToastCoreConfig.DeclineLabel\n\t\t\t      ||  toastNotificationBelonging.ToastCoreConfig.ConfirmLabel\n\t\t\t     )\"\n\t\t\t>\n\t\t\t\t\n\t\t\t\t<button\n\t\t\t\t\t\t*ngIf=\"toastNotificationBelonging.ToastCoreConfig.ConfirmLabel\"\n\t\t\t\t\t\tclass=\"ed-btn ed-btn-sm\" (click)=\"onButtonClick('confirm')\"\n\t\t\t\t\t\t[ngClass]=\"{\n\t\t\t\t          'ed-btn-primary': toastNotificationBelonging.ToastCoreConfig.LayoutType === 0,\n\t\t\t\t          'ed-btn-success': toastNotificationBelonging.ToastCoreConfig.LayoutType === 1,\n\t\t\t\t          'ed-btn-info': toastNotificationBelonging.ToastCoreConfig.LayoutType === 2,\n\t\t\t\t          'ed-btn-warning': toastNotificationBelonging.ToastCoreConfig.LayoutType === 3,\n\t\t\t\t          'ed-btn-danger': toastNotificationBelonging.ToastCoreConfig.LayoutType === 4\n\t\t\t\t        }\"\n\t\t\t\t>{{toastNotificationBelonging.ToastCoreConfig.ConfirmLabel}}\n\t\t\t\t</button>\n\t\t\t\t<button class=\"ed-btn ed-btn-sm ed-btn-secondary\" (click)=\"onButtonClick('decline')\" *ngIf=\"toastNotificationBelonging.ToastCoreConfig.DeclineLabel\">\n\t\t\t\t\t{{toastNotificationBelonging.ToastCoreConfig.DeclineLabel}}\n\t\t\t\t</button>\n\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t\n\t</div>\n\n</div>\n",
                animations: [fadeInOut(0, 1)],
                styles: ["@charset \"UTF-8\";.ed-btn-sm{font-size:12px;font-weight:400;margin-right:3px;padding:2px 8px}.ed-btn-md{font-size:14px;font-weight:bolder;margin-right:5px;padding:3px 6px}.ed-btn-lg{font-size:16px;font-weight:700;margin-right:5px;padding:4px 10px}.ed-btn{background-color:initial;border:none;border-radius:3px;cursor:pointer;display:inline-block;line-height:1.5;text-align:center;text-decoration:none;-webkit-user-select:none;user-select:none;vertical-align:middle}.ed-btn:hover{color:#989ea5}.ed-btn-check:focus+.ed-btn,.ed-btn:focus{box-shadow:0 0 1px 2px;outline:0}.ed-btn-check:active+.ed-btn,.ed-btn-check:active+.ed-btn:focus,.ed-btn-check:checked+.ed-btn,.ed-btn-check:checked+.ed-btn:focus,.ed-btn.active,.ed-btn.active:focus,.ed-btn:active,.ed-btn:active:focus{box-shadow:0 0 1px 2px}.ed-btn.disabled,.ed-btn:disabled,fieldset:disabled .ed-btn{box-shadow:none;opacity:.6;pointer-events:none}.ed-btn-primary{color:#fbfbfb;background:#ff9e00;border-color:#ff9e00}.ed-btn-primary:hover{color:#fbfbfb;border-color:#ffa81a;background:#ffb133}.ed-btn-check:focus+.ed-btn-primary,.ed-btn-primary:focus{outline:0;box-shadow:0 0 1px 2px #ffa81a}.ed-btn-check:active+.ed-btn-primary,.ed-btn-check:active+.ed-btn-primary:focus,.ed-btn-check:checked+.ed-btn-primary,.ed-btn-check:checked+.ed-btn-primary:focus,.ed-btn-primary.active,.ed-btn-primary.active:focus,.ed-btn-primary:active,.ed-btn-primary:active:focus{box-shadow:0 0 1px 2px #ffa81a}.ed-btn-secondary{color:#343a40;background:#989ea5;border-color:#989ea5}.ed-btn-secondary:hover{color:#343a40;border-color:#a6abb1;background:#b3b8bd}.ed-btn-check:focus+.ed-btn-secondary,.ed-btn-secondary:focus{outline:0;box-shadow:0 0 1px 2px #a6abb1}.ed-btn-check:active+.ed-btn-secondary,.ed-btn-check:active+.ed-btn-secondary:focus,.ed-btn-check:checked+.ed-btn-secondary,.ed-btn-check:checked+.ed-btn-secondary:focus,.ed-btn-secondary.active,.ed-btn-secondary.active:focus,.ed-btn-secondary:active,.ed-btn-secondary:active:focus{box-shadow:0 0 1px 2px #a6abb1}.ed-btn-success{color:#fbfbfb;background:#3caea3;border-color:#3caea3}.ed-btn-success:hover{color:#fbfbfb;border-color:#45bfb3;background:#58c5bb}.ed-btn-check:focus+.ed-btn-success,.ed-btn-success:focus{outline:0;box-shadow:0 0 1px 2px #45bfb3}.ed-btn-check:active+.ed-btn-success,.ed-btn-check:active+.ed-btn-success:focus,.ed-btn-check:checked+.ed-btn-success,.ed-btn-check:checked+.ed-btn-success:focus,.ed-btn-success.active,.ed-btn-success.active:focus,.ed-btn-success:active,.ed-btn-success:active:focus{box-shadow:0 0 1px 2px #45bfb3}.ed-btn-info{color:#fbfbfb;background:#2f8ee5;border-color:#2f8ee5}.ed-btn-info:hover{color:#fbfbfb;border-color:#469ae8;background:#5ca7eb}.ed-btn-check:focus+.ed-btn-info,.ed-btn-info:focus{outline:0;box-shadow:0 0 1px 2px #469ae8}.ed-btn-check:active+.ed-btn-info,.ed-btn-check:active+.ed-btn-info:focus,.ed-btn-check:checked+.ed-btn-info,.ed-btn-check:checked+.ed-btn-info:focus,.ed-btn-info.active,.ed-btn-info.active:focus,.ed-btn-info:active,.ed-btn-info:active:focus{box-shadow:0 0 1px 2px #469ae8}.ed-btn-warning{color:#fbfbfb;background:#ffc107;border-color:#ffc107}.ed-btn-warning:hover{color:#fbfbfb;border-color:#ffc721;background:#ffce3a}.ed-btn-check:focus+.ed-btn-warning,.ed-btn-warning:focus{outline:0;box-shadow:0 0 1px 2px #ffc721}.ed-btn-check:active+.ed-btn-warning,.ed-btn-check:active+.ed-btn-warning:focus,.ed-btn-check:checked+.ed-btn-warning,.ed-btn-check:checked+.ed-btn-warning:focus,.ed-btn-warning.active,.ed-btn-warning.active:focus,.ed-btn-warning:active,.ed-btn-warning:active:focus{box-shadow:0 0 1px 2px #ffc721}.ed-btn-danger{color:#343a40;background:#e46464;border-color:#e46464}.ed-btn-danger:hover{color:#343a40;border-color:#e87a7a;background:#ec8f8f}.ed-btn-check:focus+.ed-btn-danger,.ed-btn-danger:focus{outline:0;box-shadow:0 0 1px 2px #e87a7a}.ed-btn-check:active+.ed-btn-danger,.ed-btn-check:active+.ed-btn-danger:focus,.ed-btn-check:checked+.ed-btn-danger,.ed-btn-check:checked+.ed-btn-danger:focus,.ed-btn-danger.active,.ed-btn-danger.active:focus,.ed-btn-danger:active,.ed-btn-danger:active:focus{box-shadow:0 0 1px 2px #e87a7a}.ed-btn-light{color:#343a40;background:#fbfbfb;border-color:#fbfbfb}.ed-btn-light:hover{color:#343a40;border-color:#fff;background:#fff}.ed-btn-check:focus+.ed-btn-light,.ed-btn-light:focus{outline:0;box-shadow:0 0 1px 2px #fff}.ed-btn-check:active+.ed-btn-light,.ed-btn-check:active+.ed-btn-light:focus,.ed-btn-check:checked+.ed-btn-light,.ed-btn-check:checked+.ed-btn-light:focus,.ed-btn-light.active,.ed-btn-light.active:focus,.ed-btn-light:active,.ed-btn-light:active:focus{box-shadow:0 0 1px 2px #fff}.ed-btn-dark{color:#fbfbfb;background:#343a40;border-color:#343a40}.ed-btn-dark:hover{color:#fbfbfb;border-color:#3f474e;background:#4b545c}.ed-btn-check:focus+.ed-btn-dark,.ed-btn-dark:focus{outline:0;box-shadow:0 0 1px 2px #3f474e}.ed-btn-check:active+.ed-btn-dark,.ed-btn-check:active+.ed-btn-dark:focus,.ed-btn-check:checked+.ed-btn-dark,.ed-btn-check:checked+.ed-btn-dark:focus,.ed-btn-dark.active,.ed-btn-dark.active:focus,.ed-btn-dark:active,.ed-btn-dark:active:focus{box-shadow:0 0 1px 2px #3f474e}.ngx-awesome-popup-overlay{align-items:center;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);background:rgba(51,32,0,.4);bottom:0;display:flex;flex-direction:column;justify-content:center;left:0;opacity:0;position:fixed;right:0;top:0;z-index:1000}.evolve-confirm-box .text-wrapper-section,.evolve-parent-dialog .text-wrapper-section,.evolve-toast .text-wrapper-section{width:100%}.evolve-confirm-box .text-wrapper-section .text-wrapper,.evolve-parent-dialog .text-wrapper-section .text-wrapper,.evolve-toast .text-wrapper-section .text-wrapper{display:block;text-align:center;width:100%}.evolve-confirm-box .text-wrapper-section .dont-break-out,.evolve-parent-dialog .text-wrapper-section .dont-break-out,.evolve-toast .text-wrapper-section .dont-break-out{-webkit-hyphens:auto;hyphens:auto;overflow-wrap:break-word;white-space:pre-wrap;word-wrap:break-word}.evolve-confirm-box,.evolve-parent-dialog{background:#fbfbfb;border-radius:5px;border-top:7px solid;box-shadow:0 0 4px 1px rgba(0,0,0,.25);display:flex;flex-direction:column;max-height:calc(100vh - 100px);max-width:calc(100vw - 100px);position:relative;vertical-align:bottom}.evolve-confirm-box.standard-dialog,.evolve-parent-dialog.standard-dialog{border-color:transparent;padding:17px 20px 10px}.evolve-confirm-box.success-dialog,.evolve-parent-dialog.success-dialog{border-color:#3caea3}.evolve-confirm-box.info-dialog,.evolve-parent-dialog.info-dialog{border-color:#2f8ee5}.evolve-confirm-box.warning-dialog,.evolve-parent-dialog.warning-dialog{border-color:#ffc107}.evolve-confirm-box.danger-dialog,.evolve-parent-dialog.danger-dialog{border-color:#e46464}.overlay-toast{background:transparent;margin:0;opacity:0;padding:0;z-index:0}.overlay-toast,.overlay-toast .evolve-toast{display:flex;flex-direction:column;position:relative}.overlay-toast .evolve-toast{background:#fbfbfb;border-radius:5px;border-right:4px solid;box-shadow:0 0 4px 1px rgba(0,0,0,.25);margin-left:auto;margin-top:10px;max-height:350px;max-width:350px;min-width:200px;vertical-align:bottom}.overlay-toast .evolve-toast.standard-dialog{border-color:transparent}.overlay-toast .evolve-toast.success-dialog{background-color:#dcf3f1;border-color:#3caea3}.overlay-toast .evolve-toast.info-dialog{background-color:#e4f1fc;border-color:#2f8ee5}.overlay-toast .evolve-toast.warning-dialog{background-color:#fff4d3;border-color:#ffc107}.overlay-toast .evolve-toast.danger-dialog{background-color:#f7d1d1;border-color:#e46464}.overlay-toast .evolve-toast .close-ico{background:rgba(0,0,0,.2);border-radius:50%;cursor:pointer;height:18px;position:absolute;right:6px;top:6px;width:18px}.overlay-toast .evolve-toast div.close-ico:after{color:hsla(0,0%,100%,.5);content:\"\u00D7\";font-size:15px;left:5px;position:relative;text-align:center;top:-1px}.overlay-toast .evolve-toast .toast-title-content{align-items:flex-start;background-clip:padding-box;background-color:hsla(0,0%,100%,.55);border-bottom:1px solid rgba(0,0,0,.05);border-radius:5px 5px 0 0;color:#6c757d;display:flex;flex-direction:column;height:auto;justify-content:flex-start;padding:5px 10px;width:auto}.overlay-toast .evolve-toast .toast-title-content .toast-title-text{font-weight:700}.overlay-toast .evolve-toast .content-holder{display:flex;flex-direction:row-reverse;height:100%;overflow:auto;width:100%;color:#495057}.overlay-toast .evolve-toast .content-holder .toast-inner-content{padding:5px 10px}.overlay-toast .evolve-toast .content-holder .text-wrapper p{margin:0}.overlay-toast .evolve-toast .button-holder{display:flex;flex-direction:column;justify-content:flex-end;width:100%}.overlay-toast .evolve-toast .button-holder .button-section{margin:0;padding:4px 10px}"]
            },] }
];
ToastNotificationWrapperComponent.ctorParameters = () => [
    { type: ToastNotificationClass.ToastNotificationBelonging },
    { type: ChangeDetectorRef }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9hc3Qtbm90aWZpY2F0aW9uLXdyYXBwZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vbmd4LWF3ZXNvbWUtcG9wdXAvdHlwZXMvdG9hc3Qtbm90aWZpY2F0aW9uL3RvYXN0LW5vdGlmaWNhdGlvbi13cmFwcGVyL3RvYXN0LW5vdGlmaWNhdGlvbi13cmFwcGVyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQWdCLGlCQUFpQixFQUFFLFNBQVMsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUMxRSxPQUFPLEVBQUMsc0JBQXNCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDckQsT0FBTyxFQUFDLFVBQVUsRUFBVyxNQUFNLE1BQU0sQ0FBQztBQUMxQyxPQUFPLEVBQUMsS0FBSyxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFDckMsT0FBTyxFQUFDLFNBQVMsRUFBQyxNQUFNLDBCQUEwQixDQUFDO0FBU25ELE1BQU0sT0FBTyxpQ0FBaUM7SUFHMUMsWUFBbUIsMEJBQTZFLEVBQVUsRUFBcUI7UUFBNUcsK0JBQTBCLEdBQTFCLDBCQUEwQixDQUFtRDtRQUFVLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBRi9ILHVCQUFrQixHQUFXLE1BQU0sQ0FBQztJQUdwQyxDQUFDO0lBRUQsZUFBZTtRQUNYLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUVELFdBQVcsQ0FBQyxVQUFtQixFQUFFLGdCQUF5QjtRQUN0RCxNQUFNLFFBQVEsR0FBRyxJQUFJLHNCQUFzQixDQUFDLGdDQUFnQyxFQUFFLENBQUM7UUFDL0UsSUFBSSxnQkFBZ0IsRUFBRTtZQUNsQixRQUFRLENBQUMsZUFBZSxHQUFHLGdCQUFnQixDQUFDO1NBQy9DO1FBRUQsUUFBUSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNoQyxRQUFRLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO1FBQ3ZELElBQUksQ0FBQywwQkFBMEIsQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNsRixDQUFDO0lBRUQsZ0JBQWdCLENBQUMsR0FBZTtRQUM1QixtQ0FBbUM7SUFDdkMsQ0FBQztJQUVELGNBQWMsQ0FBQyxHQUFlO1FBQzFCLG1DQUFtQztJQUN2QyxDQUFDO0lBR0QsY0FBYyxDQUFDLE9BQWdDO1FBQzNDLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDeEUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUM3RCxDQUFDO0lBRUQsYUFBYSxDQUFDLEtBQTRCO1FBQ3RDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxLQUFLLFNBQVMsQ0FBQyxDQUFDO1FBQ3RDLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUM3RCxDQUFDO0lBRUQsU0FBUztRQUNMLElBQUksSUFBSSxDQUFDLDBCQUEwQixDQUFDLGVBQWUsQ0FBQyxjQUFjO2VBQzNELENBQUMsQ0FBQyxJQUFJLENBQUMsMEJBQTBCLENBQUMsT0FBTyxDQUFDLE1BQU07bUJBQ2hELElBQUksQ0FBQywwQkFBMEIsQ0FBQyxlQUFlLENBQUMsWUFBWTttQkFDNUQsSUFBSSxDQUFDLDBCQUEwQixDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsRUFDbEU7WUFDRSxVQUFVLENBQUMsR0FBRyxFQUFFO2dCQUNaLElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLENBQUMsU0FBUyxDQUFFLElBQUksQ0FBQyxFQUFFO29CQUM5QyxJQUFJLENBQUMsMEJBQTBCLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQzdELENBQUMsQ0FBQyxDQUFDO1lBRVAsQ0FBQyxFQUFFLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxlQUFlLENBQUMsY0FBYyxDQUFDLENBQUM7U0FDdEU7SUFDTCxDQUFDO0lBRUQsWUFBWSxDQUFDLGlCQUF5QjtRQUNsQyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsaUJBQWlCLENBQUM7UUFDNUMsTUFBTSxLQUFLLEdBQWUsaUJBQWlCLEtBQUssWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUUxRSxPQUFPLElBQUksVUFBVSxDQUFDLENBQUMsUUFBdUIsRUFBRSxFQUFFO1lBQzlDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDbEIsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3hCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBR0QsS0FBSztRQUNELElBQUksQ0FBQywwQkFBMEIsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUM3RCxDQUFDOzs7WUE3RUosU0FBUyxTQUFDO2dCQUNQLFFBQVEsRUFBSyxnQ0FBZ0M7Z0JBQzdDLDQrS0FBMEQ7Z0JBRTFELFVBQVUsRUFBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7O2FBQ2pDOzs7WUFYTyxzQkFBc0IsQ0FlNEMsMEJBQTBCO1lBaEI3RSxpQkFBaUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0FmdGVyVmlld0luaXQsIENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtUb2FzdE5vdGlmaWNhdGlvbkNsYXNzfSBmcm9tICcuLi9jb3JlL21vZGVsJztcbmltcG9ydCB7T2JzZXJ2YWJsZSwgT2JzZXJ2ZXJ9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHtkZWxheX0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHtmYWRlSW5PdXR9IGZyb20gJy4uLy4uLy4uL2NvcmUvYW5pbWF0aW9ucyc7XG5pbXBvcnQge0dsb2JhbEludGVyZmFjZX0gZnJvbSAnLi4vLi4vLi4vY29yZS9nbG9iYWwnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvciAgIDogJ2FwcC10b2FzdC1ub3RpZmljYXRpb24td3JhcHBlcicsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3RvYXN0LW5vdGlmaWNhdGlvbi13cmFwcGVyLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHMgIDogWycuL3RvYXN0LW5vdGlmaWNhdGlvbi13cmFwcGVyLmNvbXBvbmVudC5zY3NzJ10sXG4gICAgYW5pbWF0aW9ucyA6IFtmYWRlSW5PdXQoMCwgMSldXG59KVxuZXhwb3J0IGNsYXNzIFRvYXN0Tm90aWZpY2F0aW9uV3JhcHBlckNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQge1xuICAgIGZhZGVJbk91dEFuaW1hdGlvbjogc3RyaW5nID0gJ29wZW4nO1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB0b2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZzogVG9hc3ROb3RpZmljYXRpb25DbGFzcy5Ub2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZywgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYpIHtcbiAgICB9XG4gICAgXG4gICAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldFJlc3BvbnNlKGZhbHNlKTtcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIHRoaXMuYXV0b0Nsb3NlKCk7XG4gICAgfVxuICAgIFxuICAgIHNldFJlc3BvbnNlKF9Jc1N1Y2Nlc3M6IGJvb2xlYW4sIF9DbGlja2VkQnV0dG9uSUQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBuZXcgVG9hc3ROb3RpZmljYXRpb25DbGFzcy5Ub2FzdE5vdGlmaWNhdGlvbkRlZmF1bHRSZXNwb25zZSgpO1xuICAgICAgICBpZiAoX0NsaWNrZWRCdXR0b25JRCkge1xuICAgICAgICAgICAgcmVzcG9uc2UuQ2xpY2tlZEJ1dHRvbklEID0gX0NsaWNrZWRCdXR0b25JRDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmVzcG9uc2Uuc2V0U3VjY2VzcyhfSXNTdWNjZXNzKTtcbiAgICAgICAgcmVzcG9uc2Uuc2V0QmVsb25naW5nKHRoaXMudG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmcpO1xuICAgICAgICB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLkV2ZW50c0NvbnRyb2xsZXIuc2V0RGVmYXVsdFJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICB9XG4gICAgXG4gICAgb25PdmVybGF5Q2xpY2tlZChldnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ29uT3ZlcmxheUNsaWNrZWQnKTtcbiAgICB9XG4gICAgXG4gICAgb25Ub2FzdENsaWNrZWQoZXZ0OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdvbk92ZXJsYXlDbGlja2VkJyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIG9uQ3VzdG9tQnV0dG9uKF9CdXR0b246IEdsb2JhbEludGVyZmFjZS5JQnV0dG9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMudG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmcuRXZlbnRzQ29udHJvbGxlci5vbkJ1dHRvbkNsaWNrKF9CdXR0b24pO1xuICAgICAgICB0aGlzLnNldFJlc3BvbnNlKHRydWUsIF9CdXR0b24uSUQpO1xuICAgICAgICB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLkV2ZW50c0NvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICB9XG4gICAgXG4gICAgb25CdXR0b25DbGljayhfVHlwZTogJ2NvbmZpcm0nIHwgJ2RlY2xpbmUnKSB7XG4gICAgICAgIHRoaXMuc2V0UmVzcG9uc2UoX1R5cGUgPT09ICdjb25maXJtJyk7XG4gICAgICAgIHRoaXMudG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmcuRXZlbnRzQ29udHJvbGxlci5jbG9zZSgpO1xuICAgIH1cbiAgICBcbiAgICBhdXRvQ2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLlRvYXN0Q29yZUNvbmZpZy5BdXRvQ2xvc2VEZWxheVxuICAgICAgICAgICAgJiYgISh0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLkJ1dHRvbnMubGVuZ3RoXG4gICAgICAgICAgICB8fCB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLlRvYXN0Q29yZUNvbmZpZy5EZWNsaW5lTGFiZWxcbiAgICAgICAgICAgIHx8IHRoaXMudG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmcuVG9hc3RDb3JlQ29uZmlnLkNvbmZpcm1MYWJlbClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlUGFyZW50JCgnY2xvc2Utc2xvdycpLnN1YnNjcmliZSggcmVzcCA9PntcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZy5FdmVudHNDb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9LCB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLlRvYXN0Q29yZUNvbmZpZy5BdXRvQ2xvc2VEZWxheSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY2xvc2VQYXJlbnQkKF9DbG9zaW5nQW5pbWF0aW9uOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICB0aGlzLmZhZGVJbk91dEFuaW1hdGlvbiA9IF9DbG9zaW5nQW5pbWF0aW9uO1xuICAgICAgICBjb25zdCB0aW1lciAgICAgICAgICAgICA9IF9DbG9zaW5nQW5pbWF0aW9uID09PSAnY2xvc2Utc2xvdycgPyAxNDAwIDogMTUwO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKChvYnNlcnZlcjogT2JzZXJ2ZXI8YW55PikgPT4ge1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCgnJyk7XG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICB9KS5waXBlKGRlbGF5KHRpbWVyKSk7XG4gICAgfVxuXG4gICAgXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMudG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmcuRXZlbnRzQ29udHJvbGxlci5jbG9zZSgpO1xuICAgIH1cbn1cbiJdfQ==