import { Subject } from "rxjs";
import { map } from "rxjs/operators";
import { GlobalClass } from "../../../core/global";
import { ServiceLocator } from "../../../locator.service";
import { ConfirmBoxConfigService } from "./confirm-box-config.service";
import { ConfirmBoxService } from "./confirm-box-service";
export var ConfirmBoxClass;
(function (ConfirmBoxClass) {
    // region *** Public ***
    class ConfirmBoxInitializer {
        constructor() {
            /** @internal */
            this.confirmBoxCarrier = new ConfirmBoxClass.ConfirmBoxCarrier();
        }
        openConfirmBox$() {
            return this.confirmBoxCarrier.openConfirmBox$().pipe(map((resp) => {
                const basicConfirmBoxResponse = new ConfirmBoxResponse();
                const dataControl = new GlobalClass.DataControl();
                dataControl.copyValuesFrom(resp, basicConfirmBoxResponse);
                return basicConfirmBoxResponse;
            }));
        }
        setButtons(_Buttons) {
            this.confirmBoxCarrier.setButtons(_Buttons);
        }
        setConfig(_ConfirmBoxCoreConfig) {
            this.confirmBoxCarrier.setConfig(_ConfirmBoxCoreConfig);
        }
        setDispatch(_Title, _Message = null) {
            this.confirmBoxCarrier.setTitle(_Title);
            this.confirmBoxCarrier.setMessage(_Message);
        }
        setTitle(_Title) {
            this.confirmBoxCarrier.setTitle(_Title);
        }
        setMessage(_Message) {
            this.confirmBoxCarrier.setMessage(_Message);
        }
        setButtonLabels(_Confirm, _Decline) {
            this.confirmBoxCarrier.setButtonLabels(_Confirm, _Decline);
        }
    }
    ConfirmBoxClass.ConfirmBoxInitializer = ConfirmBoxInitializer;
    class ConfirmBoxResponse extends GlobalClass.DataControl {
        constructor() {
            super();
            // private Response: DialogPrepareResponse            = new DialogPrepareResponse();
            this.Success = null;
            this.ClickedButtonID = null;
        }
        setSuccess(_IsSuccess) {
            this.Success = _IsSuccess;
        }
        setClickedButtonID(_ClickedButtonID) {
            this.ClickedButtonID = _ClickedButtonID;
        }
    }
    ConfirmBoxClass.ConfirmBoxResponse = ConfirmBoxResponse;
    class ConfirmBoxEventsController {
        constructor(EntityUniqueID) {
            this.EntityUniqueID = EntityUniqueID;
            this._afterClosed = new Subject();
            this.afterClosed$ = this._afterClosed.asObservable();
            this._onButtonClick = new Subject();
            this.onButtonClick$ = this._onButtonClick.asObservable();
            this._buttonList = new Subject();
            this.buttonList$ = this._buttonList.asObservable();
        }
        close(_Response) {
            const response = _Response ? _Response : this.defaultResponse;
            this._afterClosed.next(response);
        }
        onButtonClick(_Button) {
            this.defaultResponse.setClickedButtonID(_Button.ID);
            this._onButtonClick.next(_Button);
        }
        setButtonList(_ButtonList) {
            this._buttonList.next(_ButtonList);
        }
        setDefaultResponse(_Response) {
            this.defaultResponse = _Response;
        }
    }
    ConfirmBoxClass.ConfirmBoxEventsController = ConfirmBoxEventsController;
    // endregion
    class ConfirmBoxDefaultResponse extends ConfirmBoxResponse {
        constructor() {
            super();
            this.confirmBoxBelonging = null;
        }
        setBelonging(_ConfirmBoxBelonging) {
            this.confirmBoxBelonging = _ConfirmBoxBelonging;
        }
    }
    ConfirmBoxClass.ConfirmBoxDefaultResponse = ConfirmBoxDefaultResponse;
    class ConfirmBoxCarrier {
        constructor() {
            this.confirmBoxBelonging = new ConfirmBoxClass.ConfirmBoxBelonging();
        }
        setButtons(_Buttons) {
            if (_Buttons.length) {
                this.confirmBoxBelonging.Buttons = _Buttons;
            }
        }
        setTitle(_Title) {
            this.confirmBoxBelonging.Dispatch.Title = _Title;
        }
        setMessage(_Message) {
            this.confirmBoxBelonging.Dispatch.Message = _Message;
        }
        setButtonLabels(_Confirm, _Decline) {
            this.confirmBoxBelonging.ConfirmBoxCoreConfig.ConfirmLabel = _Confirm;
            this.confirmBoxBelonging.ConfirmBoxCoreConfig.DeclineLabel = _Decline;
        }
        setConfig(_ConfirmBoxBelonging) {
            // region *** local UserConfig (defined on place where dialog is called) ***
            const dataControl = new GlobalClass.DataControl();
            dataControl.copyValuesFrom(_ConfirmBoxBelonging, this.confirmBoxBelonging.ConfirmBoxCoreConfig);
            // endregion
        }
        openConfirmBox$() {
            const service = ServiceLocator.injector.get(ConfirmBoxService);
            const confirmBoxController = service.open(this.confirmBoxBelonging);
            return confirmBoxController.afterClosed$;
        }
    }
    ConfirmBoxClass.ConfirmBoxCarrier = ConfirmBoxCarrier;
    class Settings {
        constructor() {
            this.Buttons = [];
            this.ConfirmBoxCoreConfig = new ConfirmBoxCoreConfig();
            this.Dispatch = new GlobalClass.Dispatch();
        }
    }
    ConfirmBoxClass.Settings = Settings;
    class ConfirmBoxCoreConfig {
        constructor() {
            this.Width = null;
            this.Height = null;
            this.ButtonPosition = null;
            this.LayoutType = null;
            this.Dispatch = null;
            this.ConfirmLabel = null;
            this.DeclineLabel = null;
            this.DisableIcon = null;
            this.AllowHTMLMessage = null;
        }
    }
    ConfirmBoxClass.ConfirmBoxCoreConfig = ConfirmBoxCoreConfig;
    class ConfirmBoxBelonging extends ConfirmBoxClass.Settings {
        constructor() {
            super();
            this.EntityUniqueID = "C" + Math.random().toString(36).substr(2, 9);
            this.EventsController = new ConfirmBoxEventsController(this.EntityUniqueID);
            const ConfirmBoxCoreConfigurator = ServiceLocator.injector.get(ConfirmBoxConfigService);
            const baseSettings = new ConfirmBoxClass.Settings();
            const dataControl = new GlobalClass.DataControl();
            dataControl.copyValuesFrom(ConfirmBoxCoreConfigurator.productionConfig.ConfirmBoxCoreConfig, baseSettings.ConfirmBoxCoreConfig);
            this.ConfirmBoxCoreConfig = baseSettings.ConfirmBoxCoreConfig;
            this.Buttons = ConfirmBoxCoreConfigurator.productionConfig.Buttons.slice();
        }
    }
    ConfirmBoxClass.ConfirmBoxBelonging = ConfirmBoxBelonging;
})(ConfirmBoxClass || (ConfirmBoxClass = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9uZ3gtYXdlc29tZS1wb3B1cC90eXBlcy9jb25maXJtLWJveC9jb3JlL21vZGVsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBYyxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDM0MsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXJDLE9BQU8sRUFBRSxXQUFXLEVBQW1CLE1BQU0sc0JBQXNCLENBQUM7QUFDcEUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzFELE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBZ0QxRCxNQUFNLEtBQVcsZUFBZSxDQW1OL0I7QUFuTkQsV0FBaUIsZUFBZTtJQUM5Qix3QkFBd0I7SUFFeEIsTUFBYSxxQkFBcUI7UUFJaEM7WUFIQSxnQkFBZ0I7WUFDUixzQkFBaUIsR0FBc0MsSUFBSSxlQUFlLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUV4RixDQUFDO1FBRWhCLGVBQWU7WUFDYixPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxJQUFJLENBQ2xELEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO2dCQUNYLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxrQkFBa0IsRUFBRSxDQUFDO2dCQUN6RCxNQUFNLFdBQVcsR0FBRyxJQUFJLFdBQVcsQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDbEQsV0FBVyxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsdUJBQXVCLENBQUMsQ0FBQztnQkFDMUQsT0FBTyx1QkFBdUIsQ0FBQztZQUNqQyxDQUFDLENBQUMsQ0FDSCxDQUFDO1FBQ0osQ0FBQztRQUVELFVBQVUsQ0FBQyxRQUFtQztZ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LElBQUksMEJBQTBCLENBQ3BELElBQUksQ0FBQyxjQUFjLENBQ3BCLENBQUM7WUFDRixNQUFNLDBCQUEwQixHQUE0QixjQUFjLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FDckYsdUJBQXVCLENBQ3hCLENBQUM7WUFDRixNQUFNLFlBQVksR0FBRyxJQUFJLGVBQWUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNwRCxNQUFNLFdBQVcsR0FBRyxJQUFJLFdBQVcsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNsRCxXQUFXLENBQUMsY0FBYyxDQUN4QiwwQkFBMEIsQ0FBQyxnQkFBZ0IsQ0FBQyxvQkFBb0IsRUFDaEUsWUFBWSxDQUFDLG9CQUFvQixDQUNsQyxDQUFDO1lBQ0YsSUFBSSxDQUFDLG9CQUFvQixHQUFHLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQztZQUM5RCxJQUFJLENBQUMsT0FBTyxHQUFHLDBCQUEwQixDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUM3RSxDQUFDO0tBQ0Y7SUF2QlksbUNBQW1CLHNCQXVCL0IsQ0FBQTtBQUNILENBQUMsRUFuTmdCLGVBQWUsS0FBZixlQUFlLFFBbU4vQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xuaW1wb3J0IHsgbWFwIH0gZnJvbSBcInJ4anMvb3BlcmF0b3JzXCI7XG5pbXBvcnQgeyBEaWFsb2dMYXlvdXREaXNwbGF5LCBWZXJ0aWNhbFBvc2l0aW9uIH0gZnJvbSBcIi4uLy4uLy4uL2NvcmUvZW51bXNcIjtcbmltcG9ydCB7IEdsb2JhbENsYXNzLCBHbG9iYWxJbnRlcmZhY2UgfSBmcm9tIFwiLi4vLi4vLi4vY29yZS9nbG9iYWxcIjtcbmltcG9ydCB7IFNlcnZpY2VMb2NhdG9yIH0gZnJvbSBcIi4uLy4uLy4uL2xvY2F0b3Iuc2VydmljZVwiO1xuaW1wb3J0IHsgQ29uZmlybUJveENvbmZpZ1NlcnZpY2UgfSBmcm9tIFwiLi9jb25maXJtLWJveC1jb25maWcuc2VydmljZVwiO1xuaW1wb3J0IHsgQ29uZmlybUJveFNlcnZpY2UgfSBmcm9tIFwiLi9jb25maXJtLWJveC1zZXJ2aWNlXCI7XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ29uZmlybUJveEludGVyZmFjZSB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgSUNvbmZpcm1Cb3hVc2VyQ29uZmlnIHtcbiAgICBCdXR0b25zPzogR2xvYmFsSW50ZXJmYWNlLklCdXR0b25bXTtcbiAgICBDb25maXJtQm94Q29yZUNvbmZpZz86IENvbmZpcm1Cb3hJbnRlcmZhY2UuSUNvbmZpcm1Cb3hDb3JlQ29uZmlnO1xuICAgIERpc3BhdGNoPzogR2xvYmFsSW50ZXJmYWNlLklEaXNwYXRjaDtcbiAgfVxuXG4gIGV4cG9ydCBpbnRlcmZhY2UgSUNvbmZpcm1Cb3hDb3JlQ29uZmlnIHtcbiAgICAvKiogRml4ZWQgcG9wdXAgd2lkdGggKi9cbiAgICBXaWR0aD86IHN0cmluZztcbiAgICAvKiogRml4ZWQgcG9wdXAgaGVpZ2h0ICovXG4gICAgSGVpZ2h0Pzogc3RyaW5nO1xuICAgIEJ1dHRvblBvc2l0aW9uPzogVmVydGljYWxQb3NpdGlvbjtcbiAgICBMYXlvdXRUeXBlPzogRGlhbG9nTGF5b3V0RGlzcGxheTtcbiAgICBEaXNwYXRjaD86IEdsb2JhbEludGVyZmFjZS5JRGlzcGF0Y2g7XG4gICAgQ29uZmlybUxhYmVsPzogc3RyaW5nO1xuICAgIERlY2xpbmVMYWJlbD86IHN0cmluZztcbiAgICBEaXNhYmxlSWNvbj86IGJvb2xlYW47XG4gICAgQWxsb3dIVE1MTWVzc2FnZT86IGJvb2xlYW47XG4gIH1cblxuICBleHBvcnQgaW50ZXJmYWNlIElDb25maXJtQm94QmVsb25naW5nIHtcbiAgICBCdXR0b25zOiBHbG9iYWxJbnRlcmZhY2UuSUJ1dHRvbltdO1xuICAgIENvbmZpcm1Cb3hDb3JlQ29uZmlnOiBDb25maXJtQm94SW50ZXJmYWNlLklDb25maXJtQm94Q29yZUNvbmZpZztcbiAgICBFbnRpdHlVbmlxdWVJRDogc3RyaW5nO1xuICAgIEV2ZW50c0NvbnRyb2xsZXI6IENvbmZpcm1Cb3hDbGFzcy5Db25maXJtQm94RXZlbnRzQ29udHJvbGxlcjtcbiAgfVxuXG4gIGV4cG9ydCBpbnRlcmZhY2UgSUNvbmZpcm1Cb3hSZXNwb25zZSB7XG4gICAgc2V0U3VjY2VzcyhfSXNTdWNjZXNzOiBib29sZWFuKTogdm9pZDtcblxuICAgIHNldENsaWNrZWRCdXR0b25JRChfQ2xpY2tlZEJ1dHRvbklEKTogdm9pZDtcbiAgfVxuXG4gIGV4cG9ydCBpbnRlcmZhY2UgSUNvbmZpcm1Cb3hQdWJsaWNSZXNwb25zZSB7XG4gICAgU3VjY2VzczogYm9vbGVhbjtcbiAgICBDbGlja2VkQnV0dG9uSUQ6IHN0cmluZztcbiAgfVxuXG4gIGV4cG9ydCBpbnRlcmZhY2UgSVByaXZhdGVSZXNwb25zZU1lcmdlZFxuICAgIGV4dGVuZHMgSUNvbmZpcm1Cb3hSZXNwb25zZSxcbiAgICAgIEdsb2JhbEludGVyZmFjZS5JUHJpdmF0ZVJlc3BvbnNlIHtcbiAgICBjb25maXJtQm94QmVsb25naW5nOiBDb25maXJtQm94SW50ZXJmYWNlLklDb25maXJtQm94QmVsb25naW5nO1xuICB9XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ29uZmlybUJveENsYXNzIHtcbiAgLy8gcmVnaW9uICoqKiBQdWJsaWMgKioqXG5cbiAgZXhwb3J0IGNsYXNzIENvbmZpcm1Cb3hJbml0aWFsaXplciB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIHByaXZhdGUgY29uZmlybUJveENhcnJpZXI6IENvbmZpcm1Cb3hDbGFzcy5Db25maXJtQm94Q2FycmllciA9IG5ldyBDb25maXJtQm94Q2xhc3MuQ29uZmlybUJveENhcnJpZXIoKTtcblxuICAgIGNvbnN0cnVjdG9yKCkge31cblxuICAgIG9wZW5Db25maXJtQm94JCgpOiBPYnNlcnZhYmxlPENvbmZpcm1Cb3hJbnRlcmZhY2UuSUNvbmZpcm1Cb3hQdWJsaWNSZXNwb25zZT4ge1xuICAgICAgcmV0dXJuIHRoaXMuY29uZmlybUJveENhcnJpZXIub3BlbkNvbmZpcm1Cb3gkKCkucGlwZShcbiAgICAgICAgbWFwKChyZXNwKSA9PiB7XG4gICAgICAgICAgY29uc3QgYmFzaWNDb25maXJtQm94UmVzcG9uc2UgPSBuZXcgQ29uZmlybUJveFJlc3BvbnNlKCk7XG4gICAgICAgICAgY29uc3QgZGF0YUNvbnRyb2wgPSBuZXcgR2xvYmFsQ2xhc3MuRGF0YUNvbnRyb2woKTtcbiAgICAgICAgICBkYXRhQ29udHJvbC5jb3B5VmFsdWVzRnJvbShyZXNwLCBiYXNpY0NvbmZpcm1Cb3hSZXNwb25zZSk7XG4gICAgICAgICAgcmV0dXJuIGJhc2ljQ29uZmlybUJveFJlc3BvbnNlO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzZXRCdXR0b25zKF9CdXR0b25zOiBHbG9iYWxJbnRlcmZhY2UuSUJ1dHRvbltdKTogdm9pZCB7XG4gICAgICB0aGlzLmNvbmZpcm1Cb3hDYXJyaWVyLnNldEJ1dHRvbnMoX0J1dHRvbnMpO1xuICAgIH1cblxuICAgIHNldENvbmZpZyhcbiAgICAgIF9Db25maXJtQm94Q29yZUNvbmZpZzogQ29uZmlybUJveEludGVyZmFjZS5JQ29uZmlybUJveENvcmVDb25maWdcbiAgICApIHtcbiAgICAgIHRoaXMuY29uZmlybUJveENhcnJpZXIuc2V0Q29uZmlnKF9Db25maXJtQm94Q29yZUNvbmZpZyk7XG4gICAgfVxuXG4gICAgc2V0RGlzcGF0Y2goX1RpdGxlOiBzdHJpbmcsIF9NZXNzYWdlOiBzdHJpbmcgPSBudWxsKTogdm9pZCB7XG4gICAgICB0aGlzLmNvbmZpcm1Cb3hDYXJyaWVyLnNldFRpdGxlKF9UaXRsZSk7XG4gICAgICB0aGlzLmNvbmZpcm1Cb3hDYXJyaWVyLnNldE1lc3NhZ2UoX01lc3NhZ2UpO1xuICAgIH1cblxuICAgIHNldFRpdGxlKF9UaXRsZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICB0aGlzLmNvbmZpcm1Cb3hDYXJyaWVyLnNldFRpdGxlKF9UaXRsZSk7XG4gICAgfVxuXG4gICAgc2V0TWVzc2FnZShfTWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICB0aGlzLmNvbmZpcm1Cb3hDYXJyaWVyLnNldE1lc3NhZ2UoX01lc3NhZ2UpO1xuICAgIH1cblxuICAgIHNldEJ1dHRvbkxhYmVscyhfQ29uZmlybTogc3RyaW5nLCBfRGVjbGluZT86IHN0cmluZyk6IHZvaWQge1xuICAgICAgdGhpcy5jb25maXJtQm94Q2Fycmllci5zZXRCdXR0b25MYWJlbHMoX0NvbmZpcm0sIF9EZWNsaW5lKTtcbiAgICB9XG4gIH1cblxuICBleHBvcnQgY2xhc3MgQ29uZmlybUJveFJlc3BvbnNlXG4gICAgZXh0ZW5kcyBHbG9iYWxDbGFzcy5EYXRhQ29udHJvbFxuICAgIGltcGxlbWVudHNcbiAgICAgIENvbmZpcm1Cb3hJbnRlcmZhY2UuSUNvbmZpcm1Cb3hSZXNwb25zZSxcbiAgICAgIENvbmZpcm1Cb3hJbnRlcmZhY2UuSUNvbmZpcm1Cb3hQdWJsaWNSZXNwb25zZSB7XG4gICAgLy8gcHJpdmF0ZSBSZXNwb25zZTogRGlhbG9nUHJlcGFyZVJlc3BvbnNlICAgICAgICAgICAgPSBuZXcgRGlhbG9nUHJlcGFyZVJlc3BvbnNlKCk7XG5cbiAgICBTdWNjZXNzOiBib29sZWFuID0gbnVsbDtcbiAgICBDbGlja2VkQnV0dG9uSUQ6IHN0cmluZyA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgIHN1cGVyKCk7XG4gICAgfVxuXG4gICAgc2V0U3VjY2VzcyhfSXNTdWNjZXNzOiBib29sZWFuKTogdm9pZCB7XG4gICAgICB0aGlzLlN1Y2Nlc3MgPSBfSXNTdWNjZXNzO1xuICAgIH1cblxuICAgIHNldENsaWNrZWRCdXR0b25JRChfQ2xpY2tlZEJ1dHRvbklEKTogdm9pZCB7XG4gICAgICB0aGlzLkNsaWNrZWRCdXR0b25JRCA9IF9DbGlja2VkQnV0dG9uSUQ7XG4gICAgfVxuICB9XG5cbiAgZXhwb3J0IGNsYXNzIENvbmZpcm1Cb3hFdmVudHNDb250cm9sbGVyIHtcbiAgICBkZWZhdWx0UmVzcG9uc2U6IENvbmZpcm1Cb3hJbnRlcmZhY2UuSVByaXZhdGVSZXNwb25zZU1lcmdlZDtcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2FmdGVyQ2xvc2VkOiBTdWJqZWN0PENvbmZpcm1Cb3hJbnRlcmZhY2UuSVByaXZhdGVSZXNwb25zZU1lcmdlZD4gPSBuZXcgU3ViamVjdDxDb25maXJtQm94SW50ZXJmYWNlLklQcml2YXRlUmVzcG9uc2VNZXJnZWQ+KCk7XG4gICAgYWZ0ZXJDbG9zZWQkOiBPYnNlcnZhYmxlPENvbmZpcm1Cb3hJbnRlcmZhY2UuSVByaXZhdGVSZXNwb25zZU1lcmdlZD4gPSB0aGlzLl9hZnRlckNsb3NlZC5hc09ic2VydmFibGUoKTtcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgX29uQnV0dG9uQ2xpY2s6IFN1YmplY3Q8R2xvYmFsSW50ZXJmYWNlLklCdXR0b24+ID0gbmV3IFN1YmplY3Q8R2xvYmFsSW50ZXJmYWNlLklCdXR0b24+KCk7XG4gICAgb25CdXR0b25DbGljayQ6IE9ic2VydmFibGU8R2xvYmFsSW50ZXJmYWNlLklCdXR0b24+ID0gdGhpcy5fb25CdXR0b25DbGljay5hc09ic2VydmFibGUoKTtcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9idXR0b25MaXN0OiBTdWJqZWN0PFxuICAgICAgR2xvYmFsSW50ZXJmYWNlLklCdXR0b25bXVxuICAgID4gPSBuZXcgU3ViamVjdDxHbG9iYWxJbnRlcmZhY2UuSUJ1dHRvbltdPigpO1xuICAgIGJ1dHRvbkxpc3QkOiBPYnNlcnZhYmxlPFxuICAgICAgR2xvYmFsSW50ZXJmYWNlLklCdXR0b25bXVxuICAgID4gPSB0aGlzLl9idXR0b25MaXN0LmFzT2JzZXJ2YWJsZSgpO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBFbnRpdHlVbmlxdWVJRDogc3RyaW5nKSB7fVxuXG4gICAgY2xvc2UoX1Jlc3BvbnNlPzogQ29uZmlybUJveEludGVyZmFjZS5JUHJpdmF0ZVJlc3BvbnNlTWVyZ2VkKTogdm9pZCB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IF9SZXNwb25zZSA/IF9SZXNwb25zZSA6IHRoaXMuZGVmYXVsdFJlc3BvbnNlO1xuICAgICAgdGhpcy5fYWZ0ZXJDbG9zZWQubmV4dChyZXNwb25zZSk7XG4gICAgfVxuXG4gICAgb25CdXR0b25DbGljayhfQnV0dG9uOiBHbG9iYWxJbnRlcmZhY2UuSUJ1dHRvbik6IHZvaWQge1xuICAgICAgdGhpcy5kZWZhdWx0UmVzcG9uc2Uuc2V0Q2xpY2tlZEJ1dHRvbklEKF9CdXR0b24uSUQpO1xuICAgICAgdGhpcy5fb25CdXR0b25DbGljay5uZXh0KF9CdXR0b24pO1xuICAgIH1cblxuICAgIHNldEJ1dHRvbkxpc3QoX0J1dHRvbkxpc3Q6IEdsb2JhbEludGVyZmFjZS5JQnV0dG9uW10pOiB2b2lkIHtcbiAgICAgIHRoaXMuX2J1dHRvbkxpc3QubmV4dChfQnV0dG9uTGlzdCk7XG4gICAgfVxuXG4gICAgc2V0RGVmYXVsdFJlc3BvbnNlKFxuICAgICAgX1Jlc3BvbnNlOiBDb25maXJtQm94SW50ZXJmYWNlLklQcml2YXRlUmVzcG9uc2VNZXJnZWRcbiAgICApOiB2b2lkIHtcbiAgICAgIHRoaXMuZGVmYXVsdFJlc3BvbnNlID0gX1Jlc3BvbnNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIGVuZHJlZ2lvblxuXG4gIGV4cG9ydCBjbGFzcyBDb25maXJtQm94RGVmYXVsdFJlc3BvbnNlXG4gICAgZXh0ZW5kcyBDb25maXJtQm94UmVzcG9uc2VcbiAgICBpbXBsZW1lbnRzIENvbmZpcm1Cb3hJbnRlcmZhY2UuSVByaXZhdGVSZXNwb25zZU1lcmdlZCB7XG4gICAgY29uZmlybUJveEJlbG9uZ2luZzogQ29uZmlybUJveEJlbG9uZ2luZyA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgIHN1cGVyKCk7XG4gICAgfVxuXG4gICAgc2V0QmVsb25naW5nKF9Db25maXJtQm94QmVsb25naW5nKTogdm9pZCB7XG4gICAgICB0aGlzLmNvbmZpcm1Cb3hCZWxvbmdpbmcgPSBfQ29uZmlybUJveEJlbG9uZ2luZztcbiAgICB9XG4gIH1cblxuICBleHBvcnQgY2xhc3MgQ29uZmlybUJveENhcnJpZXIge1xuICAgIGNvbmZpcm1Cb3hCZWxvbmdpbmc6IENvbmZpcm1Cb3hDbGFzcy5Db25maXJtQm94QmVsb25naW5nID0gbmV3IENvbmZpcm1Cb3hDbGFzcy5Db25maXJtQm94QmVsb25naW5nKCk7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgICBzZXRCdXR0b25zKF9CdXR0b25zOiBHbG9iYWxJbnRlcmZhY2UuSUJ1dHRvbltdKSB7XG4gICAgICBpZiAoX0J1dHRvbnMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY29uZmlybUJveEJlbG9uZ2luZy5CdXR0b25zID0gX0J1dHRvbnM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2V0VGl0bGUoX1RpdGxlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgIHRoaXMuY29uZmlybUJveEJlbG9uZ2luZy5EaXNwYXRjaC5UaXRsZSA9IF9UaXRsZTtcbiAgICB9XG5cbiAgICBzZXRNZXNzYWdlKF9NZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgIHRoaXMuY29uZmlybUJveEJlbG9uZ2luZy5EaXNwYXRjaC5NZXNzYWdlID0gX01lc3NhZ2U7XG4gICAgfVxuXG4gICAgc2V0QnV0dG9uTGFiZWxzKF9Db25maXJtOiBzdHJpbmcsIF9EZWNsaW5lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgIHRoaXMuY29uZmlybUJveEJlbG9uZ2luZy5Db25maXJtQm94Q29yZUNvbmZpZy5Db25maXJtTGFiZWwgPSBfQ29uZmlybTtcbiAgICAgIHRoaXMuY29uZmlybUJveEJlbG9uZ2luZy5Db25maXJtQm94Q29yZUNvbmZpZy5EZWNsaW5lTGFiZWwgPSBfRGVjbGluZTtcbiAgICB9XG5cbiAgICBzZXRDb25maWcoX0NvbmZpcm1Cb3hCZWxvbmdpbmc6IENvbmZpcm1Cb3hJbnRlcmZhY2UuSUNvbmZpcm1Cb3hDb3JlQ29uZmlnKSB7XG4gICAgICAvLyByZWdpb24gKioqIGxvY2FsIFVzZXJDb25maWcgKGRlZmluZWQgb24gcGxhY2Ugd2hlcmUgZGlhbG9nIGlzIGNhbGxlZCkgKioqXG4gICAgICBjb25zdCBkYXRhQ29udHJvbCA9IG5ldyBHbG9iYWxDbGFzcy5EYXRhQ29udHJvbCgpO1xuICAgICAgZGF0YUNvbnRyb2wuY29weVZhbHVlc0Zyb20oXG4gICAgICAgIF9Db25maXJtQm94QmVsb25naW5nLFxuICAgICAgICB0aGlzLmNvbmZpcm1Cb3hCZWxvbmdpbmcuQ29uZmlybUJveENvcmVDb25maWdcbiAgICAgICk7XG4gICAgICAvLyBlbmRyZWdpb25cbiAgICB9XG5cbiAgICBvcGVuQ29uZmlybUJveCQoKTogT2JzZXJ2YWJsZTxDb25maXJtQm94SW50ZXJmYWNlLklQcml2YXRlUmVzcG9uc2VNZXJnZWQ+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2U6IENvbmZpcm1Cb3hTZXJ2aWNlID0gU2VydmljZUxvY2F0b3IuaW5qZWN0b3IuZ2V0KFxuICAgICAgICBDb25maXJtQm94U2VydmljZVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGNvbmZpcm1Cb3hDb250cm9sbGVyID0gc2VydmljZS5vcGVuKHRoaXMuY29uZmlybUJveEJlbG9uZ2luZyk7XG4gICAgICByZXR1cm4gY29uZmlybUJveENvbnRyb2xsZXIuYWZ0ZXJDbG9zZWQkO1xuICAgIH1cbiAgfVxuXG4gIGV4cG9ydCBjbGFzcyBTZXR0aW5ncyB7XG4gICAgQnV0dG9uczogR2xvYmFsSW50ZXJmYWNlLklCdXR0b25bXSA9IFtdO1xuICAgIENvbmZpcm1Cb3hDb3JlQ29uZmlnOiBDb25maXJtQm94SW50ZXJmYWNlLklDb25maXJtQm94Q29yZUNvbmZpZyA9IG5ldyBDb25maXJtQm94Q29yZUNvbmZpZygpO1xuICAgIERpc3BhdGNoOiBHbG9iYWxJbnRlcmZhY2UuSURpc3BhdGNoID0gbmV3IEdsb2JhbENsYXNzLkRpc3BhdGNoKCk7XG4gIH1cblxuICBleHBvcnQgY2xhc3MgQ29uZmlybUJveENvcmVDb25maWdcbiAgICBpbXBsZW1lbnRzIENvbmZpcm1Cb3hJbnRlcmZhY2UuSUNvbmZpcm1Cb3hDb3JlQ29uZmlnIHtcbiAgICBXaWR0aDogc3RyaW5nID0gbnVsbDtcbiAgICBIZWlnaHQ6IHN0cmluZyA9IG51bGw7XG4gICAgQnV0dG9uUG9zaXRpb246IFZlcnRpY2FsUG9zaXRpb24gPSBudWxsO1xuICAgIExheW91dFR5cGU6IERpYWxvZ0xheW91dERpc3BsYXkgPSBudWxsO1xuICAgIERpc3BhdGNoOiBHbG9iYWxJbnRlcmZhY2UuSURpc3BhdGNoID0gbnVsbDtcbiAgICBDb25maXJtTGFiZWw6IHN0cmluZyA9IG51bGw7XG4gICAgRGVjbGluZUxhYmVsOiBzdHJpbmcgPSBudWxsO1xuICAgIERpc2FibGVJY29uOiBib29sZWFuID0gbnVsbDtcbiAgICBBbGxvd0hUTUxNZXNzYWdlOiBib29sZWFuID0gbnVsbDtcbiAgfVxuXG4gIGV4cG9ydCBjbGFzcyBDb25maXJtQm94QmVsb25naW5nXG4gICAgZXh0ZW5kcyBDb25maXJtQm94Q2xhc3MuU2V0dGluZ3NcbiAgICBpbXBsZW1lbnRzIENvbmZpcm1Cb3hJbnRlcmZhY2UuSUNvbmZpcm1Cb3hCZWxvbmdpbmcge1xuICAgIEVudGl0eVVuaXF1ZUlEOiBzdHJpbmcgPSBcIkNcIiArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcbiAgICBFdmVudHNDb250cm9sbGVyOiBDb25maXJtQm94RXZlbnRzQ29udHJvbGxlcjtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgc3VwZXIoKTtcbiAgICAgIHRoaXMuRXZlbnRzQ29udHJvbGxlciA9IG5ldyBDb25maXJtQm94RXZlbnRzQ29udHJvbGxlcihcbiAgICAgICAgdGhpcy5FbnRpdHlVbmlxdWVJRFxuICAgICAgKTtcbiAgICAgIGNvbnN0IENvbmZpcm1Cb3hDb3JlQ29uZmlndXJhdG9yOiBDb25maXJtQm94Q29uZmlnU2VydmljZSA9IFNlcnZpY2VMb2NhdG9yLmluamVjdG9yLmdldChcbiAgICAgICAgQ29uZmlybUJveENvbmZpZ1NlcnZpY2VcbiAgICAgICk7XG4gICAgICBjb25zdCBiYXNlU2V0dGluZ3MgPSBuZXcgQ29uZmlybUJveENsYXNzLlNldHRpbmdzKCk7XG4gICAgICBjb25zdCBkYXRhQ29udHJvbCA9IG5ldyBHbG9iYWxDbGFzcy5EYXRhQ29udHJvbCgpO1xuICAgICAgZGF0YUNvbnRyb2wuY29weVZhbHVlc0Zyb20oXG4gICAgICAgIENvbmZpcm1Cb3hDb3JlQ29uZmlndXJhdG9yLnByb2R1Y3Rpb25Db25maWcuQ29uZmlybUJveENvcmVDb25maWcsXG4gICAgICAgIGJhc2VTZXR0aW5ncy5Db25maXJtQm94Q29yZUNvbmZpZ1xuICAgICAgKTtcbiAgICAgIHRoaXMuQ29uZmlybUJveENvcmVDb25maWcgPSBiYXNlU2V0dGluZ3MuQ29uZmlybUJveENvcmVDb25maWc7XG4gICAgICB0aGlzLkJ1dHRvbnMgPSBDb25maXJtQm94Q29yZUNvbmZpZ3VyYXRvci5wcm9kdWN0aW9uQ29uZmlnLkJ1dHRvbnMuc2xpY2UoKTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==