import { Subject } from "rxjs";
import { map, take } from "rxjs/operators";
import { GlobalClass } from "../../../core/global";
import { ServiceLocator } from "../../../locator.service";
import { ConfirmBoxConfigService } from "./confirm-box-config.service";
import { ConfirmBoxService } from "./confirm-box-service";
export var ConfirmBoxClass;
(function (ConfirmBoxClass) {
    // region *** Public ***
    class ConfirmBoxInitializer {
        constructor() {
            /** @internal */
            this.confirmBoxCarrier = new ConfirmBoxClass.ConfirmBoxCarrier();
        }
        openConfirmBox$() {
            return this.confirmBoxCarrier.openConfirmBox$().pipe(map((resp) => {
                const basicConfirmBoxResponse = new ConfirmBoxResponse();
                const dataControl = new GlobalClass.DataControl();
                dataControl.copyValuesFrom(resp, basicConfirmBoxResponse);
                return basicConfirmBoxResponse;
            }), take(1));
        }
        setButtons(_Buttons) {
            this.confirmBoxCarrier.setButtons(_Buttons);
        }
        setConfig(_ConfirmBoxCoreConfig) {
            this.confirmBoxCarrier.setConfig(_ConfirmBoxCoreConfig);
        }
        setDispatch(_Title, _Message = null) {
            this.confirmBoxCarrier.setTitle(_Title);
            this.confirmBoxCarrier.setMessage(_Message);
        }
        setTitle(_Title) {
            this.confirmBoxCarrier.setTitle(_Title);
        }
        setMessage(_Message) {
            this.confirmBoxCarrier.setMessage(_Message);
        }
        setButtonLabels(_Confirm, _Decline) {
            this.confirmBoxCarrier.setButtonLabels(_Confirm, _Decline);
        }
    }
    ConfirmBoxClass.ConfirmBoxInitializer = ConfirmBoxInitializer;
    class ConfirmBoxResponse extends GlobalClass.DataControl {
        constructor() {
            super();
            // private Response: DialogPrepareResponse            = new DialogPrepareResponse();
            this.Success = null;
            this.ClickedButtonID = null;
        }
        setSuccess(_IsSuccess) {
            this.Success = _IsSuccess;
        }
        setClickedButtonID(_ClickedButtonID) {
            this.ClickedButtonID = _ClickedButtonID;
        }
    }
    ConfirmBoxClass.ConfirmBoxResponse = ConfirmBoxResponse;
    class ConfirmBoxEventsController {
        constructor(EntityUniqueID) {
            this.EntityUniqueID = EntityUniqueID;
            this._afterClosed = new Subject();
            this.afterClosed$ = this._afterClosed.asObservable();
            this._onButtonClick = new Subject();
            this.onButtonClick$ = this._onButtonClick.asObservable();
            this._buttonList = new Subject();
            this.buttonList$ = this._buttonList.asObservable();
        }
        close(_Response) {
            const response = _Response ? _Response : this.defaultResponse;
            this._afterClosed.next(response);
        }
        onButtonClick(_Button) {
            this.defaultResponse.setClickedButtonID(_Button.ID);
            this._onButtonClick.next(_Button);
        }
        setButtonList(_ButtonList) {
            this._buttonList.next(_ButtonList);
        }
        setDefaultResponse(_Response) {
            this.defaultResponse = _Response;
        }
    }
    ConfirmBoxClass.ConfirmBoxEventsController = ConfirmBoxEventsController;
    // endregion
    class ConfirmBoxDefaultResponse extends ConfirmBoxResponse {
        constructor() {
            super();
            this.confirmBoxBelonging = null;
        }
        setBelonging(_ConfirmBoxBelonging) {
            this.confirmBoxBelonging = _ConfirmBoxBelonging;
        }
    }
    ConfirmBoxClass.ConfirmBoxDefaultResponse = ConfirmBoxDefaultResponse;
    class ConfirmBoxCarrier {
        constructor() {
            this.confirmBoxBelonging = new ConfirmBoxClass.ConfirmBoxBelonging();
        }
        setButtons(_Buttons) {
            if (_Buttons.length) {
                this.confirmBoxBelonging.Buttons = _Buttons;
            }
        }
        setTitle(_Title) {
            this.confirmBoxBelonging.Dispatch.Title = _Title;
        }
        setMessage(_Message) {
            this.confirmBoxBelonging.Dispatch.Message = _Message;
        }
        setButtonLabels(_Confirm, _Decline) {
            this.confirmBoxBelonging.ConfirmBoxCoreConfig.ConfirmLabel = _Confirm;
            this.confirmBoxBelonging.ConfirmBoxCoreConfig.DeclineLabel = _Decline;
        }
        setConfig(_ConfirmBoxBelonging) {
            // region *** local UserConfig (defined on place where dialog is called) ***
            const dataControl = new GlobalClass.DataControl();
            dataControl.copyValuesFrom(_ConfirmBoxBelonging, this.confirmBoxBelonging.ConfirmBoxCoreConfig);
            // endregion
        }
        openConfirmBox$() {
            const service = ServiceLocator.injector.get(ConfirmBoxService);
            const confirmBoxController = service.open(this.confirmBoxBelonging);
            return confirmBoxController.afterClosed$;
        }
    }
    ConfirmBoxClass.ConfirmBoxCarrier = ConfirmBoxCarrier;
    class Settings {
        constructor() {
            this.Buttons = [];
            this.ConfirmBoxCoreConfig = new ConfirmBoxCoreConfig();
            this.Dispatch = new GlobalClass.Dispatch();
        }
    }
    ConfirmBoxClass.Settings = Settings;
    class ConfirmBoxCoreConfig {
        constructor() {
            this.Width = null;
            this.Height = null;
            this.ButtonPosition = null;
            this.LayoutType = null;
            this.Dispatch = null;
            this.ConfirmLabel = null;
            this.DeclineLabel = null;
            this.DisableIcon = null;
            this.AllowHTMLMessage = null;
        }
    }
    ConfirmBoxClass.ConfirmBoxCoreConfig = ConfirmBoxCoreConfig;
    class ConfirmBoxBelonging extends ConfirmBoxClass.Settings {
        constructor() {
            super();
            this.EntityUniqueID = "C" + Math.random().toString(36).substr(2, 9);
            this.EventsController = new ConfirmBoxEventsController(this.EntityUniqueID);
            const ConfirmBoxCoreConfigurator = ServiceLocator.injector.get(ConfirmBoxConfigService);
            const baseSettings = new ConfirmBoxClass.Settings();
            const dataControl = new GlobalClass.DataControl();
            dataControl.copyValuesFrom(ConfirmBoxCoreConfigurator.productionConfig.ConfirmBoxCoreConfig, baseSettings.ConfirmBoxCoreConfig);
            this.ConfirmBoxCoreConfig = baseSettings.ConfirmBoxCoreConfig;
            this.Buttons = ConfirmBoxCoreConfigurator.productionConfig.Buttons.slice();
        }
    }
    ConfirmBoxClass.ConfirmBoxBelonging = ConfirmBoxBelonging;
})(ConfirmBoxClass || (ConfirmBoxClass = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9uZ3gtYXdlc29tZS1wb3B1cC90eXBlcy9jb25maXJtLWJveC9jb3JlL21vZGVsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBYyxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDM0MsT0FBTyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUUzQyxPQUFPLEVBQUUsV0FBVyxFQUFtQixNQUFNLHNCQUFzQixDQUFDO0FBQ3BFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUN2RSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQWdEMUQsTUFBTSxLQUFXLGVBQWUsQ0FvTi9CO0FBcE5ELFdBQWlCLGVBQWU7SUFDOUIsd0JBQXdCO0lBRXhCLE1BQWEscUJBQXFCO1FBSWhDO1lBSEEsZ0JBQWdCO1lBQ1Isc0JBQWlCLEdBQXNDLElBQUksZUFBZSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFFeEYsQ0FBQztRQUVoQixlQUFlO1lBQ2IsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsZUFBZSxFQUFFLENBQUMsSUFBSSxDQUNsRCxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtnQkFDWCxNQUFNLHVCQUF1QixHQUFHLElBQUksa0JBQWtCLEVBQUUsQ0FBQztnQkFDekQsTUFBTSxXQUFXLEdBQUcsSUFBSSxXQUFXLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQ2xELFdBQVcsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLHVCQUF1QixDQUFDLENBQUM7Z0JBQzFELE9BQU8sdUJBQXVCLENBQUM7WUFDakMsQ0FBQyxDQUFDLEVBQ0YsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUNSLENB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QUMsQ0FBQztZQUtyRSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSwwQkFBMEIsQ0FDcEQsSUFBSSxDQUFDLGNBQWMsQ0FDcEIsQ0FBQztZQUNGLE1BQU0sMEJBQTBCLEdBQTRCLGNBQWMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUNyRix1QkFBdUIsQ0FDeEIsQ0FBQztZQUNGLE1BQU0sWUFBWSxHQUFHLElBQUksZUFBZSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ3BELE1BQU0sV0FBVyxHQUFHLElBQUksV0FBVyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ2xELFdBQVcsQ0FBQyxjQUFjLENBQ3hCLDBCQUEwQixDQUFDLGdCQUFnQixDQUFDLG9CQUFvQixFQUNoRSxZQUFZLENBQUMsb0JBQW9CLENBQ2xDLENBQUM7WUFDRixJQUFJLENBQUMsb0JBQW9CLEdBQUcsWUFBWSxDQUFDLG9CQUFvQixDQUFDO1lBQzlELElBQUksQ0FBQyxPQUFPLEdBQUcsMEJBQTBCLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQzdFLENBQUM7S0FDRjtJQXZCWSxtQ0FBbUIsc0JBdUIvQixDQUFBO0FBQ0gsQ0FBQyxFQXBOZ0IsZUFBZSxLQUFmLGVBQWUsUUFvTi9CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gXCJyeGpzXCI7XG5pbXBvcnQgeyBtYXAsIHRha2UgfSBmcm9tIFwicnhqcy9vcGVyYXRvcnNcIjtcbmltcG9ydCB7IERpYWxvZ0xheW91dERpc3BsYXksIFZlcnRpY2FsUG9zaXRpb24gfSBmcm9tIFwiLi4vLi4vLi4vY29yZS9lbnVtc1wiO1xuaW1wb3J0IHsgR2xvYmFsQ2xhc3MsIEdsb2JhbEludGVyZmFjZSB9IGZyb20gXCIuLi8uLi8uLi9jb3JlL2dsb2JhbFwiO1xuaW1wb3J0IHsgU2VydmljZUxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vLi4vbG9jYXRvci5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBDb25maXJtQm94Q29uZmlnU2VydmljZSB9IGZyb20gXCIuL2NvbmZpcm0tYm94LWNvbmZpZy5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBDb25maXJtQm94U2VydmljZSB9IGZyb20gXCIuL2NvbmZpcm0tYm94LXNlcnZpY2VcIjtcblxuZXhwb3J0IG5hbWVzcGFjZSBDb25maXJtQm94SW50ZXJmYWNlIHtcbiAgZXhwb3J0IGludGVyZmFjZSBJQ29uZmlybUJveFVzZXJDb25maWcge1xuICAgIEJ1dHRvbnM/OiBHbG9iYWxJbnRlcmZhY2UuSUJ1dHRvbltdO1xuICAgIENvbmZpcm1Cb3hDb3JlQ29uZmlnPzogQ29uZmlybUJveEludGVyZmFjZS5JQ29uZmlybUJveENvcmVDb25maWc7XG4gICAgRGlzcGF0Y2g/OiBHbG9iYWxJbnRlcmZhY2UuSURpc3BhdGNoO1xuICB9XG5cbiAgZXhwb3J0IGludGVyZmFjZSBJQ29uZmlybUJveENvcmVDb25maWcge1xuICAgIC8qKiBGaXhlZCBwb3B1cCB3aWR0aCAqL1xuICAgIFdpZHRoPzogc3RyaW5nO1xuICAgIC8qKiBGaXhlZCBwb3B1cCBoZWlnaHQgKi9cbiAgICBIZWlnaHQ/OiBzdHJpbmc7XG4gICAgQnV0dG9uUG9zaXRpb24/OiBWZXJ0aWNhbFBvc2l0aW9uO1xuICAgIExheW91dFR5cGU/OiBEaWFsb2dMYXlvdXREaXNwbGF5O1xuICAgIERpc3BhdGNoPzogR2xvYmFsSW50ZXJmYWNlLklEaXNwYXRjaDtcbiAgICBDb25maXJtTGFiZWw/OiBzdHJpbmc7XG4gICAgRGVjbGluZUxhYmVsPzogc3RyaW5nO1xuICAgIERpc2FibGVJY29uPzogYm9vbGVhbjtcbiAgICBBbGxvd0hUTUxNZXNzYWdlPzogYm9vbGVhbjtcbiAgfVxuXG4gIGV4cG9ydCBpbnRlcmZhY2UgSUNvbmZpcm1Cb3hCZWxvbmdpbmcge1xuICAgIEJ1dHRvbnM6IEdsb2JhbEludGVyZmFjZS5JQnV0dG9uW107XG4gICAgQ29uZmlybUJveENvcmVDb25maWc6IENvbmZpcm1Cb3hJbnRlcmZhY2UuSUNvbmZpcm1Cb3hDb3JlQ29uZmlnO1xuICAgIEVudGl0eVVuaXF1ZUlEOiBzdHJpbmc7XG4gICAgRXZlbnRzQ29udHJvbGxlcjogQ29uZmlybUJveENsYXNzLkNvbmZpcm1Cb3hFdmVudHNDb250cm9sbGVyO1xuICB9XG5cbiAgZXhwb3J0IGludGVyZmFjZSBJQ29uZmlybUJveFJlc3BvbnNlIHtcbiAgICBzZXRTdWNjZXNzKF9Jc1N1Y2Nlc3M6IGJvb2xlYW4pOiB2b2lkO1xuXG4gICAgc2V0Q2xpY2tlZEJ1dHRvbklEKF9DbGlja2VkQnV0dG9uSUQpOiB2b2lkO1xuICB9XG5cbiAgZXhwb3J0IGludGVyZmFjZSBJQ29uZmlybUJveFB1YmxpY1Jlc3BvbnNlIHtcbiAgICBTdWNjZXNzOiBib29sZWFuO1xuICAgIENsaWNrZWRCdXR0b25JRDogc3RyaW5nO1xuICB9XG5cbiAgZXhwb3J0IGludGVyZmFjZSBJUHJpdmF0ZVJlc3BvbnNlTWVyZ2VkXG4gICAgZXh0ZW5kcyBJQ29uZmlybUJveFJlc3BvbnNlLFxuICAgICAgR2xvYmFsSW50ZXJmYWNlLklQcml2YXRlUmVzcG9uc2Uge1xuICAgIGNvbmZpcm1Cb3hCZWxvbmdpbmc6IENvbmZpcm1Cb3hJbnRlcmZhY2UuSUNvbmZpcm1Cb3hCZWxvbmdpbmc7XG4gIH1cbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDb25maXJtQm94Q2xhc3Mge1xuICAvLyByZWdpb24gKioqIFB1YmxpYyAqKipcblxuICBleHBvcnQgY2xhc3MgQ29uZmlybUJveEluaXRpYWxpemVyIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgcHJpdmF0ZSBjb25maXJtQm94Q2FycmllcjogQ29uZmlybUJveENsYXNzLkNvbmZpcm1Cb3hDYXJyaWVyID0gbmV3IENvbmZpcm1Cb3hDbGFzcy5Db25maXJtQm94Q2FycmllcigpO1xuXG4gICAgY29uc3RydWN0b3IoKSB7fVxuXG4gICAgb3BlbkNvbmZpcm1Cb3gkKCk6IE9ic2VydmFibGU8Q29uZmlybUJveEludGVyZmFjZS5JQ29uZmlybUJveFB1YmxpY1Jlc3BvbnNlPiB7XG4gICAgICByZXR1cm4gdGhpcy5jb25maXJtQm94Q2Fycmllci5vcGVuQ29uZmlybUJveCQoKS5waXBlKFxuICAgICAgICBtYXAoKHJlc3ApID0+IHtcbiAgICAgICAgICBjb25zdCBiYXNpY0NvbmZpcm1Cb3hSZXNwb25zZSA9IG5ldyBDb25maXJtQm94UmVzcG9uc2UoKTtcbiAgICAgICAgICBjb25zdCBkYXRhQ29udHJvbCA9IG5ldyBHbG9iYWxDbGFzcy5EYXRhQ29udHJvbCgpO1xuICAgICAgICAgIGRhdGFDb250cm9sLmNvcHlWYWx1ZXNGcm9tKHJlc3AsIGJhc2ljQ29uZmlybUJveFJlc3BvbnNlKTtcbiAgICAgICAgICByZXR1cm4gYmFzaWNDb25maXJtQm94UmVzcG9uc2U7XG4gICAgICAgIH0pLFxuICAgICAgICB0YWtlKDEpXG4gICAgICApO1xuICAgIH1cblxuICAgIHNldEJ1dHRvbnMoX0J1dHRvbnM6IEdsb2JhbEludGVyZmFjZS5JQnV0dG9uW10pOiB2b2lkIHtcbiAgICAgIHRoaXMuY29uZmlybUJveENhcnJpZXIuc2V0QnV0dG9ucyhfQnV0dG9ucyk7XG4gICAgfVxuXG4gICAgc2V0Q29uZmlnKFxuICAgICAgX0NvbmZpcm1Cb3hDb3JlQ29uZmlnOiBDb25maXJtQm94SW50ZXJmYWNlLklDb25maXJtQm94Q29yZUNvbmZpZ1xuICAgICkge1xuICAgICAgdGhpcy5jb25maXJtQm94Q2Fycmllci5zZXRDb25maWcoX0NvbmZpcm1Cb3hDb3JlQ29uZmlnKTtcbiAgICB9XG5cbiAgICBzZXREaXNwYXRjaChfVGl0bGU6IHN0cmluZywgX01lc3NhZ2U6IHN0cmluZyA9IG51bGwpOiB2b2lkIHtcbiAgICAgIHRoaXMuY29uZmlybUJveENhcnJpZXIuc2V0VGl0bGUoX1RpdGxlKTtcbiAgICAgIHRoaXMuY29uZmlybUJveENhcnJpZXIuc2V0TWVzc2FnZShfTWVzc2FnZSk7XG4gICAgfVxuXG4gICAgc2V0VGl0bGUoX1RpdGxlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgIHRoaXMuY29uZmlybUJveENhcnJpZXIuc2V0VGl0bGUoX1RpdGxlKTtcbiAgICB9XG5cbiAgICBzZXRNZXNzYWdlKF9NZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgIHRoaXMuY29uZmlybUJveENhcnJpZXIuc2V0TWVzc2FnZShfTWVzc2FnZSk7XG4gICAgfVxuXG4gICAgc2V0QnV0dG9uTGFiZWxzKF9Db25maXJtOiBzdHJpbmcsIF9EZWNsaW5lPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICB0aGlzLmNvbmZpcm1Cb3hDYXJyaWVyLnNldEJ1dHRvbkxhYmVscyhfQ29uZmlybSwgX0RlY2xpbmUpO1xuICAgIH1cbiAgfVxuXG4gIGV4cG9ydCBjbGFzcyBDb25maXJtQm94UmVzcG9uc2VcbiAgICBleHRlbmRzIEdsb2JhbENsYXNzLkRhdGFDb250cm9sXG4gICAgaW1wbGVtZW50c1xuICAgICAgQ29uZmlybUJveEludGVyZmFjZS5JQ29uZmlybUJveFJlc3BvbnNlLFxuICAgICAgQ29uZmlybUJveEludGVyZmFjZS5JQ29uZmlybUJveFB1YmxpY1Jlc3BvbnNlIHtcbiAgICAvLyBwcml2YXRlIFJlc3BvbnNlOiBEaWFsb2dQcmVwYXJlUmVzcG9uc2UgICAgICAgICAgICA9IG5ldyBEaWFsb2dQcmVwYXJlUmVzcG9uc2UoKTtcblxuICAgIFN1Y2Nlc3M6IGJvb2xlYW4gPSBudWxsO1xuICAgIENsaWNrZWRCdXR0b25JRDogc3RyaW5nID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICBzZXRTdWNjZXNzKF9Jc1N1Y2Nlc3M6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgIHRoaXMuU3VjY2VzcyA9IF9Jc1N1Y2Nlc3M7XG4gICAgfVxuXG4gICAgc2V0Q2xpY2tlZEJ1dHRvbklEKF9DbGlja2VkQnV0dG9uSUQpOiB2b2lkIHtcbiAgICAgIHRoaXMuQ2xpY2tlZEJ1dHRvbklEID0gX0NsaWNrZWRCdXR0b25JRDtcbiAgICB9XG4gIH1cblxuICBleHBvcnQgY2xhc3MgQ29uZmlybUJveEV2ZW50c0NvbnRyb2xsZXIge1xuICAgIGRlZmF1bHRSZXNwb25zZTogQ29uZmlybUJveEludGVyZmFjZS5JUHJpdmF0ZVJlc3BvbnNlTWVyZ2VkO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYWZ0ZXJDbG9zZWQ6IFN1YmplY3Q8Q29uZmlybUJveEludGVyZmFjZS5JUHJpdmF0ZVJlc3BvbnNlTWVyZ2VkPiA9IG5ldyBTdWJqZWN0PENvbmZpcm1Cb3hJbnRlcmZhY2UuSVByaXZhdGVSZXNwb25zZU1lcmdlZD4oKTtcbiAgICBhZnRlckNsb3NlZCQ6IE9ic2VydmFibGU8Q29uZmlybUJveEludGVyZmFjZS5JUHJpdmF0ZVJlc3BvbnNlTWVyZ2VkPiA9IHRoaXMuX2FmdGVyQ2xvc2VkLmFzT2JzZXJ2YWJsZSgpO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSBfb25CdXR0b25DbGljazogU3ViamVjdDxHbG9iYWxJbnRlcmZhY2UuSUJ1dHRvbj4gPSBuZXcgU3ViamVjdDxHbG9iYWxJbnRlcmZhY2UuSUJ1dHRvbj4oKTtcbiAgICBvbkJ1dHRvbkNsaWNrJDogT2JzZXJ2YWJsZTxHbG9iYWxJbnRlcmZhY2UuSUJ1dHRvbj4gPSB0aGlzLl9vbkJ1dHRvbkNsaWNrLmFzT2JzZXJ2YWJsZSgpO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX2J1dHRvbkxpc3Q6IFN1YmplY3Q8XG4gICAgICBHbG9iYWxJbnRlcmZhY2UuSUJ1dHRvbltdXG4gICAgPiA9IG5ldyBTdWJqZWN0PEdsb2JhbEludGVyZmFjZS5JQnV0dG9uW10+KCk7XG4gICAgYnV0dG9uTGlzdCQ6IE9ic2VydmFibGU8XG4gICAgICBHbG9iYWxJbnRlcmZhY2UuSUJ1dHRvbltdXG4gICAgPiA9IHRoaXMuX2J1dHRvbkxpc3QuYXNPYnNlcnZhYmxlKCk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIEVudGl0eVVuaXF1ZUlEOiBzdHJpbmcpIHt9XG5cbiAgICBjbG9zZShfUmVzcG9uc2U/OiBDb25maXJtQm94SW50ZXJmYWNlLklQcml2YXRlUmVzcG9uc2VNZXJnZWQpOiB2b2lkIHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gX1Jlc3BvbnNlID8gX1Jlc3BvbnNlIDogdGhpcy5kZWZhdWx0UmVzcG9uc2U7XG4gICAgICB0aGlzLl9hZnRlckNsb3NlZC5uZXh0KHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBvbkJ1dHRvbkNsaWNrKF9CdXR0b246IEdsb2JhbEludGVyZmFjZS5JQnV0dG9uKTogdm9pZCB7XG4gICAgICB0aGlzLmRlZmF1bHRSZXNwb25zZS5zZXRDbGlja2VkQnV0dG9uSUQoX0J1dHRvbi5JRCk7XG4gICAgICB0aGlzLl9vbkJ1dHRvbkNsaWNrLm5leHQoX0J1dHRvbik7XG4gICAgfVxuXG4gICAgc2V0QnV0dG9uTGlzdChfQnV0dG9uTGlzdDogR2xvYmFsSW50ZXJmYWNlLklCdXR0b25bXSk6IHZvaWQge1xuICAgICAgdGhpcy5fYnV0dG9uTGlzdC5uZXh0KF9CdXR0b25MaXN0KTtcbiAgICB9XG5cbiAgICBzZXREZWZhdWx0UmVzcG9uc2UoXG4gICAgICBfUmVzcG9uc2U6IENvbmZpcm1Cb3hJbnRlcmZhY2UuSVByaXZhdGVSZXNwb25zZU1lcmdlZFxuICAgICk6IHZvaWQge1xuICAgICAgdGhpcy5kZWZhdWx0UmVzcG9uc2UgPSBfUmVzcG9uc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gZW5kcmVnaW9uXG5cbiAgZXhwb3J0IGNsYXNzIENvbmZpcm1Cb3hEZWZhdWx0UmVzcG9uc2VcbiAgICBleHRlbmRzIENvbmZpcm1Cb3hSZXNwb25zZVxuICAgIGltcGxlbWVudHMgQ29uZmlybUJveEludGVyZmFjZS5JUHJpdmF0ZVJlc3BvbnNlTWVyZ2VkIHtcbiAgICBjb25maXJtQm94QmVsb25naW5nOiBDb25maXJtQm94QmVsb25naW5nID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICBzZXRCZWxvbmdpbmcoX0NvbmZpcm1Cb3hCZWxvbmdpbmcpOiB2b2lkIHtcbiAgICAgIHRoaXMuY29uZmlybUJveEJlbG9uZ2luZyA9IF9Db25maXJtQm94QmVsb25naW5nO1xuICAgIH1cbiAgfVxuXG4gIGV4cG9ydCBjbGFzcyBDb25maXJtQm94Q2FycmllciB7XG4gICAgY29uZmlybUJveEJlbG9uZ2luZzogQ29uZmlybUJveENsYXNzLkNvbmZpcm1Cb3hCZWxvbmdpbmcgPSBuZXcgQ29uZmlybUJveENsYXNzLkNvbmZpcm1Cb3hCZWxvbmdpbmcoKTtcblxuICAgIGNvbnN0cnVjdG9yKCkge31cblxuICAgIHNldEJ1dHRvbnMoX0J1dHRvbnM6IEdsb2JhbEludGVyZmFjZS5JQnV0dG9uW10pIHtcbiAgICAgIGlmIChfQnV0dG9ucy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5jb25maXJtQm94QmVsb25naW5nLkJ1dHRvbnMgPSBfQnV0dG9ucztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRUaXRsZShfVGl0bGU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgdGhpcy5jb25maXJtQm94QmVsb25naW5nLkRpc3BhdGNoLlRpdGxlID0gX1RpdGxlO1xuICAgIH1cblxuICAgIHNldE1lc3NhZ2UoX01lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgICAgdGhpcy5jb25maXJtQm94QmVsb25naW5nLkRpc3BhdGNoLk1lc3NhZ2UgPSBfTWVzc2FnZTtcbiAgICB9XG5cbiAgICBzZXRCdXR0b25MYWJlbHMoX0NvbmZpcm06IHN0cmluZywgX0RlY2xpbmU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgdGhpcy5jb25maXJtQm94QmVsb25naW5nLkNvbmZpcm1Cb3hDb3JlQ29uZmlnLkNvbmZpcm1MYWJlbCA9IF9Db25maXJtO1xuICAgICAgdGhpcy5jb25maXJtQm94QmVsb25naW5nLkNvbmZpcm1Cb3hDb3JlQ29uZmlnLkRlY2xpbmVMYWJlbCA9IF9EZWNsaW5lO1xuICAgIH1cblxuICAgIHNldENvbmZpZyhfQ29uZmlybUJveEJlbG9uZ2luZzogQ29uZmlybUJveEludGVyZmFjZS5JQ29uZmlybUJveENvcmVDb25maWcpIHtcbiAgICAgIC8vIHJlZ2lvbiAqKiogbG9jYWwgVXNlckNvbmZpZyAoZGVmaW5lZCBvbiBwbGFjZSB3aGVyZSBkaWFsb2cgaXMgY2FsbGVkKSAqKipcbiAgICAgIGNvbnN0IGRhdGFDb250cm9sID0gbmV3IEdsb2JhbENsYXNzLkRhdGFDb250cm9sKCk7XG4gICAgICBkYXRhQ29udHJvbC5jb3B5VmFsdWVzRnJvbShcbiAgICAgICAgX0NvbmZpcm1Cb3hCZWxvbmdpbmcsXG4gICAgICAgIHRoaXMuY29uZmlybUJveEJlbG9uZ2luZy5Db25maXJtQm94Q29yZUNvbmZpZ1xuICAgICAgKTtcbiAgICAgIC8vIGVuZHJlZ2lvblxuICAgIH1cblxuICAgIG9wZW5Db25maXJtQm94JCgpOiBPYnNlcnZhYmxlPENvbmZpcm1Cb3hJbnRlcmZhY2UuSVByaXZhdGVSZXNwb25zZU1lcmdlZD4ge1xuICAgICAgY29uc3Qgc2VydmljZTogQ29uZmlybUJveFNlcnZpY2UgPSBTZXJ2aWNlTG9jYXRvci5pbmplY3Rvci5nZXQoXG4gICAgICAgIENvbmZpcm1Cb3hTZXJ2aWNlXG4gICAgICApO1xuICAgICAgY29uc3QgY29uZmlybUJveENvbnRyb2xsZXIgPSBzZXJ2aWNlLm9wZW4odGhpcy5jb25maXJtQm94QmVsb25naW5nKTtcbiAgICAgIHJldHVybiBjb25maXJtQm94Q29udHJvbGxlci5hZnRlckNsb3NlZCQ7XG4gICAgfVxuICB9XG5cbiAgZXhwb3J0IGNsYXNzIFNldHRpbmdzIHtcbiAgICBCdXR0b25zOiBHbG9iYWxJbnRlcmZhY2UuSUJ1dHRvbltdID0gW107XG4gICAgQ29uZmlybUJveENvcmVDb25maWc6IENvbmZpcm1Cb3hJbnRlcmZhY2UuSUNvbmZpcm1Cb3hDb3JlQ29uZmlnID0gbmV3IENvbmZpcm1Cb3hDb3JlQ29uZmlnKCk7XG4gICAgRGlzcGF0Y2g6IEdsb2JhbEludGVyZmFjZS5JRGlzcGF0Y2ggPSBuZXcgR2xvYmFsQ2xhc3MuRGlzcGF0Y2goKTtcbiAgfVxuXG4gIGV4cG9ydCBjbGFzcyBDb25maXJtQm94Q29yZUNvbmZpZ1xuICAgIGltcGxlbWVudHMgQ29uZmlybUJveEludGVyZmFjZS5JQ29uZmlybUJveENvcmVDb25maWcge1xuICAgIFdpZHRoOiBzdHJpbmcgPSBudWxsO1xuICAgIEhlaWdodDogc3RyaW5nID0gbnVsbDtcbiAgICBCdXR0b25Qb3NpdGlvbjogVmVydGljYWxQb3NpdGlvbiA9IG51bGw7XG4gICAgTGF5b3V0VHlwZTogRGlhbG9nTGF5b3V0RGlzcGxheSA9IG51bGw7XG4gICAgRGlzcGF0Y2g6IEdsb2JhbEludGVyZmFjZS5JRGlzcGF0Y2ggPSBudWxsO1xuICAgIENvbmZpcm1MYWJlbDogc3RyaW5nID0gbnVsbDtcbiAgICBEZWNsaW5lTGFiZWw6IHN0cmluZyA9IG51bGw7XG4gICAgRGlzYWJsZUljb246IGJvb2xlYW4gPSBudWxsO1xuICAgIEFsbG93SFRNTE1lc3NhZ2U6IGJvb2xlYW4gPSBudWxsO1xuICB9XG5cbiAgZXhwb3J0IGNsYXNzIENvbmZpcm1Cb3hCZWxvbmdpbmdcbiAgICBleHRlbmRzIENvbmZpcm1Cb3hDbGFzcy5TZXR0aW5nc1xuICAgIGltcGxlbWVudHMgQ29uZmlybUJveEludGVyZmFjZS5JQ29uZmlybUJveEJlbG9uZ2luZyB7XG4gICAgRW50aXR5VW5pcXVlSUQ6IHN0cmluZyA9IFwiQ1wiICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xuICAgIEV2ZW50c0NvbnRyb2xsZXI6IENvbmZpcm1Cb3hFdmVudHNDb250cm9sbGVyO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgdGhpcy5FdmVudHNDb250cm9sbGVyID0gbmV3IENvbmZpcm1Cb3hFdmVudHNDb250cm9sbGVyKFxuICAgICAgICB0aGlzLkVudGl0eVVuaXF1ZUlEXG4gICAgICApO1xuICAgICAgY29uc3QgQ29uZmlybUJveENvcmVDb25maWd1cmF0b3I6IENvbmZpcm1Cb3hDb25maWdTZXJ2aWNlID0gU2VydmljZUxvY2F0b3IuaW5qZWN0b3IuZ2V0KFxuICAgICAgICBDb25maXJtQm94Q29uZmlnU2VydmljZVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGJhc2VTZXR0aW5ncyA9IG5ldyBDb25maXJtQm94Q2xhc3MuU2V0dGluZ3MoKTtcbiAgICAgIGNvbnN0IGRhdGFDb250cm9sID0gbmV3IEdsb2JhbENsYXNzLkRhdGFDb250cm9sKCk7XG4gICAgICBkYXRhQ29udHJvbC5jb3B5VmFsdWVzRnJvbShcbiAgICAgICAgQ29uZmlybUJveENvcmVDb25maWd1cmF0b3IucHJvZHVjdGlvbkNvbmZpZy5Db25maXJtQm94Q29yZUNvbmZpZyxcbiAgICAgICAgYmFzZVNldHRpbmdzLkNvbmZpcm1Cb3hDb3JlQ29uZmlnXG4gICAgICApO1xuICAgICAgdGhpcy5Db25maXJtQm94Q29yZUNvbmZpZyA9IGJhc2VTZXR0aW5ncy5Db25maXJtQm94Q29yZUNvbmZpZztcbiAgICAgIHRoaXMuQnV0dG9ucyA9IENvbmZpcm1Cb3hDb3JlQ29uZmlndXJhdG9yLnByb2R1Y3Rpb25Db25maWcuQnV0dG9ucy5zbGljZSgpO1xuICAgIH1cbiAgfVxufVxuIl19